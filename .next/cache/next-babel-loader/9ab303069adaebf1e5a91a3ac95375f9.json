{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/danigrant/Projects/usv-dashboard/pages/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport fetch from 'isomorphic-fetch';\nimport Layout from '../components/Layout';\nimport Companies from '../components/Companies';\n\nclass Index extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      activeCompany: {}\n    });\n\n    _defineProperty(this, \"setActiveCompany\", company => {\n      this.setState({\n        activeCompany: company\n      });\n    });\n  }\n\n  static async getInitialProps({\n    query\n  }) {\n    // http://localhost:3000/?q=rebecca\n    const name = query.q ? query.q.toLowerCase() : \"\"; // fetch the team\n\n    const resTeam = await fetch('https://api.airtable.com/v0/appPHYsJXq2j8dCKC/Team%20for%20Dashboard', {\n      headers: {\n        \"Authorization\": `Bearer ${process.env.AIRTABLE_KEY}`\n      }\n    });\n    const jsonTeam = await resTeam.json(); // fetch the partner's companies\n\n    const resCompanies = await fetch(`https://api.airtable.com/v0/appPHYsJXq2j8dCKC/Organizations?filterByFormula=%7Bpartner_username%7D%3D'${name}'&view=USV+Portfolio+Companies`, {\n      headers: {\n        \"Authorization\": `Bearer ${process.env.AIRTABLE_KEY}`\n      }\n    });\n    const jsonCompanies = await resCompanies.json(); // return as props\n\n    return {\n      team: jsonTeam.records,\n      companies: jsonCompanies.records.length > 0 ? jsonCompanies.records : null,\n      activePartner: name.length > 0 ? name : null\n    };\n  }\n\n  render() {\n    const {\n      team,\n      companies,\n      activePartner\n    } = this.props;\n    const {\n      activeCompany\n    } = this.state;\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, __jsx(Layout, {\n      team: team,\n      companies: companies,\n      activePartner: activePartner,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, companies && __jsx(Companies, {\n      companies: companies,\n      activeCompany: activeCompany,\n      setActiveCompany: this.setActiveCompany,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Index; // import Layout from '../components/Layout'\n// import Companies from '../components/Companies'\n// import GoogleDoc from '../components/GoogleDoc'\n//\n// import { getTeam } from '../utils/Airtable'\n// import { getPartnerCompanies } from '../utils/Airtable'\n//\n// class Index extends React.Component {\n//   constructor(props) {\n//     super(props)\n//   }\n//   resetDashboard = () => {\n//     this.props.changeActiveCompany({})\n//     this.props.changeActivePartner('')\n//   }\n//   render() {\n//     return (\n//       <div>\n//         <Layout>\n//           {\n//             this.props.activePartnerCompanies.length > 0 &&\n//             <Companies activePartnerCompanies={this.props.activePartnerCompanies} activeCompany={this.props.activeCompany} changeActiveCompany={this.props.changeActiveCompany} />\n//           }\n//           <GoogleDoc url={this.props.activeCompany.name ? `https://docs.google.com/document/d/1tan4xBwhVVWcsIVdQpuOOhWDPn5MkO3arrspShOSCGk/edit#heading=${this.props.activeCompany.notes_gdoc_heading_id}` : \"https://docs.google.com/document/d/12jQecxqh1oIdb2EcNm3qTAanjPJIEG0Zdf0vuusdfh0/edit\"} />\n//           <div>\n//             {\n//               this.props.activeCompany.name &&\n//                 <div className=\"column column-med\">\n//                   {\n//                     this.props.activeCompany.ceo_faces ? this.props.activeCompany.ceo_faces.map(ceo => <img className=\"img-sml circular margin-right-sml margin-bottom-sml flex-column\" src={ceo.url} /> ) : ''\n//                   }\n//                   <p><a href={this.props.activeCompany.onepager_gdoc_url} target=\"_blank\">One Pager</a></p>\n//                 </div>\n//             }\n//           </div>\n//         </Layout>\n//       </div>\n//     )\n//   }\n// }\n//\n// export default Index","map":{"version":3,"sources":["/Users/danigrant/Projects/usv-dashboard/pages/index.js"],"names":["fetch","Layout","Companies","Index","React","Component","activeCompany","company","setState","getInitialProps","query","name","q","toLowerCase","resTeam","headers","process","env","AIRTABLE_KEY","jsonTeam","json","resCompanies","jsonCompanies","team","records","companies","length","activePartner","render","props","state","setActiveCompany"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,kBAAlB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;;AAEA,MAAMC,KAAN,SAAoBC,KAAK,CAACC,SAA1B,CAAoC;AAAA;AAAA;;AAAA,mCAC1B;AAAEC,MAAAA,aAAa,EAAE;AAAjB,KAD0B;;AAAA,8CAwBdC,OAAD,IAAa;AAC9B,WAAKC,QAAL,CAAc;AAAEF,QAAAA,aAAa,EAAEC;AAAjB,OAAd;AACD,KA1BiC;AAAA;;AAGlC,eAAaE,eAAb,CAA6B;AAAEC,IAAAA;AAAF,GAA7B,EAAwC;AAEtC;AACA,UAAMC,IAAI,GAAGD,KAAK,CAACE,CAAN,GAAUF,KAAK,CAACE,CAAN,CAAQC,WAAR,EAAV,GAAkC,EAA/C,CAHsC,CAKtC;;AACA,UAAMC,OAAO,GAAG,MAAMd,KAAK,CAAC,sEAAD,EAAyE;AAAEe,MAAAA,OAAO,EAAE;AAAE,yBAAkB,UAASC,OAAO,CAACC,GAAR,CAAYC,YAAa;AAAtD;AAAX,KAAzE,CAA3B;AACA,UAAMC,QAAQ,GAAG,MAAML,OAAO,CAACM,IAAR,EAAvB,CAPsC,CAStC;;AACA,UAAMC,YAAY,GAAG,MAAMrB,KAAK,CAAE,yGAAwGW,IAAK,gCAA/G,EAAgJ;AAAEI,MAAAA,OAAO,EAAE;AAAE,yBAAkB,UAASC,OAAO,CAACC,GAAR,CAAYC,YAAa;AAAtD;AAAX,KAAhJ,CAAhC;AACA,UAAMI,aAAa,GAAG,MAAMD,YAAY,CAACD,IAAb,EAA5B,CAXsC,CAatC;;AACA,WAAO;AACLG,MAAAA,IAAI,EAAEJ,QAAQ,CAACK,OADV;AAELC,MAAAA,SAAS,EAAEH,aAAa,CAACE,OAAd,CAAsBE,MAAtB,GAA+B,CAA/B,GAAmCJ,aAAa,CAACE,OAAjD,GAA2D,IAFjE;AAGLG,MAAAA,aAAa,EAAEhB,IAAI,CAACe,MAAL,GAAc,CAAd,GAAkBf,IAAlB,GAAyB;AAHnC,KAAP;AAKD;;AAMDiB,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEL,MAAAA,IAAF;AAAQE,MAAAA,SAAR;AAAmBE,MAAAA;AAAnB,QAAqC,KAAKE,KAAhD;AACA,UAAM;AAAEvB,MAAAA;AAAF,QAAoB,KAAKwB,KAA/B;AAEA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,MAAD;AAAQ,MAAA,IAAI,EAAEP,IAAd;AAAoB,MAAA,SAAS,EAAEE,SAA/B;AAA0C,MAAA,aAAa,EAAEE,aAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEEF,SAAS,IACT,MAAC,SAAD;AAAW,MAAA,SAAS,EAAEA,SAAtB;AAAiC,MAAA,aAAa,EAAEnB,aAAhD;AAA+D,MAAA,gBAAgB,EAAE,KAAKyB,gBAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,CADF,CADF;AAUD;;AA1CiC;;AA6CpC,eAAe5B,KAAf,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import fetch from 'isomorphic-fetch'\nimport Layout from '../components/Layout'\nimport Companies from '../components/Companies'\n\nclass Index extends React.Component {\n  state = { activeCompany: {} }\n\n  static async getInitialProps({ query }) {\n\n    // http://localhost:3000/?q=rebecca\n    const name = query.q ? query.q.toLowerCase() : \"\"\n\n    // fetch the team\n    const resTeam = await fetch('https://api.airtable.com/v0/appPHYsJXq2j8dCKC/Team%20for%20Dashboard', { headers: { \"Authorization\": `Bearer ${process.env.AIRTABLE_KEY}` } })\n    const jsonTeam = await resTeam.json()\n\n    // fetch the partner's companies\n    const resCompanies = await fetch(`https://api.airtable.com/v0/appPHYsJXq2j8dCKC/Organizations?filterByFormula=%7Bpartner_username%7D%3D'${name}'&view=USV+Portfolio+Companies`, { headers: { \"Authorization\": `Bearer ${process.env.AIRTABLE_KEY}` } })\n    const jsonCompanies = await resCompanies.json()\n\n    // return as props\n    return {\n      team: jsonTeam.records,\n      companies: jsonCompanies.records.length > 0 ? jsonCompanies.records : null,\n      activePartner: name.length > 0 ? name : null\n    }\n  }\n\n  setActiveCompany = (company) => {\n    this.setState({ activeCompany: company })\n  }\n\n  render() {\n    const { team, companies, activePartner } = this.props\n    const { activeCompany } = this.state\n\n    return (\n      <div>\n        <Layout team={team} companies={companies} activePartner={activePartner} >\n        {\n          companies &&\n          <Companies companies={companies} activeCompany={activeCompany} setActiveCompany={this.setActiveCompany} />\n        }\n        </Layout>\n      </div>\n    )\n  }\n}\n\nexport default Index\n\n// import Layout from '../components/Layout'\n// import Companies from '../components/Companies'\n// import GoogleDoc from '../components/GoogleDoc'\n//\n// import { getTeam } from '../utils/Airtable'\n// import { getPartnerCompanies } from '../utils/Airtable'\n//\n// class Index extends React.Component {\n//   constructor(props) {\n//     super(props)\n//   }\n//   resetDashboard = () => {\n//     this.props.changeActiveCompany({})\n//     this.props.changeActivePartner('')\n//   }\n//   render() {\n//     return (\n//       <div>\n//         <Layout>\n//           {\n//             this.props.activePartnerCompanies.length > 0 &&\n//             <Companies activePartnerCompanies={this.props.activePartnerCompanies} activeCompany={this.props.activeCompany} changeActiveCompany={this.props.changeActiveCompany} />\n//           }\n//           <GoogleDoc url={this.props.activeCompany.name ? `https://docs.google.com/document/d/1tan4xBwhVVWcsIVdQpuOOhWDPn5MkO3arrspShOSCGk/edit#heading=${this.props.activeCompany.notes_gdoc_heading_id}` : \"https://docs.google.com/document/d/12jQecxqh1oIdb2EcNm3qTAanjPJIEG0Zdf0vuusdfh0/edit\"} />\n//           <div>\n//             {\n//               this.props.activeCompany.name &&\n//                 <div className=\"column column-med\">\n//                   {\n//                     this.props.activeCompany.ceo_faces ? this.props.activeCompany.ceo_faces.map(ceo => <img className=\"img-sml circular margin-right-sml margin-bottom-sml flex-column\" src={ceo.url} /> ) : ''\n//                   }\n//                   <p><a href={this.props.activeCompany.onepager_gdoc_url} target=\"_blank\">One Pager</a></p>\n//                 </div>\n//             }\n//           </div>\n//         </Layout>\n//       </div>\n//     )\n//   }\n// }\n//\n// export default Index\n"]},"metadata":{},"sourceType":"module"}