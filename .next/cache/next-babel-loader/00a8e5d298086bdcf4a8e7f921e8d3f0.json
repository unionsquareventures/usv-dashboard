{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/danigrant/Projects/usv-dashboard/pages/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport fetch from 'isomorphic-fetch';\nimport Layout from '../components/Layout';\n\nvar Index =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Index, _React$Component);\n\n  function Index() {\n    _classCallCheck(this, Index);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Index).apply(this, arguments));\n  }\n\n  _createClass(Index, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          team = _this$props.team,\n          companies = _this$props.companies,\n          activePartner = _this$props.activePartner;\n      return __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }, __jsx(Layout, {\n        team: team,\n        companies: companies,\n        activePartner: activePartner,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        },\n        __self: this\n      }), \"}\");\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var query, name, resTeam, jsonTeam, resCompanies, jsonCompanies;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                query = _ref.query;\n                // http://localhost:3000/?q=rebecca\n                name = query.q ? query.q.toLowerCase() : \"\"; // fetch the team\n\n                _context.next = 4;\n                return fetch('https://api.airtable.com/v0/appPHYsJXq2j8dCKC/Team%20for%20Dashboard', {\n                  headers: {\n                    \"Authorization\": \"Bearer \".concat(process.env.AIRTABLE_KEY)\n                  }\n                });\n\n              case 4:\n                resTeam = _context.sent;\n                _context.next = 7;\n                return resTeam.json();\n\n              case 7:\n                jsonTeam = _context.sent;\n                _context.next = 10;\n                return fetch(\"https://api.airtable.com/v0/appPHYsJXq2j8dCKC/Organizations?filterByFormula=%7Bpartner_username%7D%3D'\".concat(name, \"'&view=USV+Portfolio+Companies\"), {\n                  headers: {\n                    \"Authorization\": \"Bearer \".concat(process.env.AIRTABLE_KEY)\n                  }\n                });\n\n              case 10:\n                resCompanies = _context.sent;\n                _context.next = 13;\n                return resCompanies.json();\n\n              case 13:\n                jsonCompanies = _context.sent;\n                return _context.abrupt(\"return\", {\n                  team: jsonTeam.records,\n                  companies: jsonCompanies.records.length > 0 ? jsonCompanies.records : null,\n                  activePartner: name.length > 0 ? name : null\n                });\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Index;\n}(React.Component);\n\nexport default Index; // import Layout from '../components/Layout'\n// import CompanyList from '../components/CompanyList'\n// import GoogleDoc from '../components/GoogleDoc'\n//\n// import { getTeam } from '../utils/Airtable'\n// import { getPartnerCompanies } from '../utils/Airtable'\n//\n// class Index extends React.Component {\n//   constructor(props) {\n//     super(props)\n//   }\n//   resetDashboard = () => {\n//     this.props.changeActiveCompany({})\n//     this.props.changeActivePartner('')\n//   }\n//   render() {\n//     return (\n//       <div>\n//         <Layout>\n//           {\n//             this.props.activePartnerCompanies.length > 0 &&\n//             <CompanyList activePartnerCompanies={this.props.activePartnerCompanies} activeCompany={this.props.activeCompany} changeActiveCompany={this.props.changeActiveCompany} />\n//           }\n//           <GoogleDoc url={this.props.activeCompany.name ? `https://docs.google.com/document/d/1tan4xBwhVVWcsIVdQpuOOhWDPn5MkO3arrspShOSCGk/edit#heading=${this.props.activeCompany.notes_gdoc_heading_id}` : \"https://docs.google.com/document/d/12jQecxqh1oIdb2EcNm3qTAanjPJIEG0Zdf0vuusdfh0/edit\"} />\n//           <div>\n//             {\n//               this.props.activeCompany.name &&\n//                 <div className=\"column column-med\">\n//                   {\n//                     this.props.activeCompany.ceo_faces ? this.props.activeCompany.ceo_faces.map(ceo => <img className=\"img-sml circular margin-right-sml margin-bottom-sml flex-column\" src={ceo.url} /> ) : ''\n//                   }\n//                   <p><a href={this.props.activeCompany.onepager_gdoc_url} target=\"_blank\">One Pager</a></p>\n//                 </div>\n//             }\n//           </div>\n//         </Layout>\n//       </div>\n//     )\n//   }\n// }\n//\n// export default Index","map":{"version":3,"sources":["/Users/danigrant/Projects/usv-dashboard/pages/index.js"],"names":["fetch","Layout","Index","props","team","companies","activePartner","query","name","q","toLowerCase","headers","process","env","AIRTABLE_KEY","resTeam","json","jsonTeam","resCompanies","jsonCompanies","records","length","React","Component"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,kBAAlB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;;IAEMC,K;;;;;;;;;;;;;6BAsBK;AAAA,wBACoC,KAAKC,KADzC;AAAA,UACCC,IADD,eACCA,IADD;AAAA,UACOC,SADP,eACOA,SADP;AAAA,UACkBC,aADlB,eACkBA,aADlB;AAEP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,MAAD;AAAQ,QAAA,IAAI,EAAEF,IAAd;AAAoB,QAAA,SAAS,EAAEC,SAA/B;AAA0C,QAAA,aAAa,EAAEC,aAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,MADF;AAKD;;;;;;;;;;;;AA5B8BC,gBAAAA,K,QAAAA,K;AAE7B;AACMC,gBAAAA,I,GAAOD,KAAK,CAACE,CAAN,GAAUF,KAAK,CAACE,CAAN,CAAQC,WAAR,EAAV,GAAkC,E,EAE/C;;;uBACsBV,KAAK,CAAC,sEAAD,EAAyE;AAAEW,kBAAAA,OAAO,EAAE;AAAE,sDAA2BC,OAAO,CAACC,GAAR,CAAYC,YAAvC;AAAF;AAAX,iBAAzE,C;;;AAArBC,gBAAAA,O;;uBACiBA,OAAO,CAACC,IAAR,E;;;AAAjBC,gBAAAA,Q;;uBAGqBjB,KAAK,iHAA0GQ,IAA1G,qCAAgJ;AAAEG,kBAAAA,OAAO,EAAE;AAAE,sDAA2BC,OAAO,CAACC,GAAR,CAAYC,YAAvC;AAAF;AAAX,iBAAhJ,C;;;AAA1BI,gBAAAA,Y;;uBACsBA,YAAY,CAACF,IAAb,E;;;AAAtBG,gBAAAA,a;iDAGC;AACLf,kBAAAA,IAAI,EAAEa,QAAQ,CAACG,OADV;AAELf,kBAAAA,SAAS,EAAEc,aAAa,CAACC,OAAd,CAAsBC,MAAtB,GAA+B,CAA/B,GAAmCF,aAAa,CAACC,OAAjD,GAA2D,IAFjE;AAGLd,kBAAAA,aAAa,EAAEE,IAAI,CAACa,MAAL,GAAc,CAAd,GAAkBb,IAAlB,GAAyB;AAHnC,iB;;;;;;;;;;;;;;;;;;;EAfSc,KAAK,CAACC,S;;AAgC1B,eAAerB,KAAf,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import fetch from 'isomorphic-fetch'\nimport Layout from '../components/Layout'\n\nclass Index extends React.Component {\n  static async getInitialProps({ query }) {\n\n    // http://localhost:3000/?q=rebecca\n    const name = query.q ? query.q.toLowerCase() : \"\"\n\n    // fetch the team\n    const resTeam = await fetch('https://api.airtable.com/v0/appPHYsJXq2j8dCKC/Team%20for%20Dashboard', { headers: { \"Authorization\": `Bearer ${process.env.AIRTABLE_KEY}` } })\n    const jsonTeam = await resTeam.json()\n\n    // fetch the partner's companies\n    const resCompanies = await fetch(`https://api.airtable.com/v0/appPHYsJXq2j8dCKC/Organizations?filterByFormula=%7Bpartner_username%7D%3D'${name}'&view=USV+Portfolio+Companies`, { headers: { \"Authorization\": `Bearer ${process.env.AIRTABLE_KEY}` } })\n    const jsonCompanies = await resCompanies.json()\n\n    // return as props\n    return {\n      team: jsonTeam.records,\n      companies: jsonCompanies.records.length > 0 ? jsonCompanies.records : null,\n      activePartner: name.length > 0 ? name : null\n    }\n  }\n\n  render() {\n    const { team, companies, activePartner } = this.props\n    return (\n      <div>\n        <Layout team={team} companies={companies} activePartner={activePartner} />}\n      </div>\n    )\n  }\n}\n\nexport default Index\n\n// import Layout from '../components/Layout'\n// import CompanyList from '../components/CompanyList'\n// import GoogleDoc from '../components/GoogleDoc'\n//\n// import { getTeam } from '../utils/Airtable'\n// import { getPartnerCompanies } from '../utils/Airtable'\n//\n// class Index extends React.Component {\n//   constructor(props) {\n//     super(props)\n//   }\n//   resetDashboard = () => {\n//     this.props.changeActiveCompany({})\n//     this.props.changeActivePartner('')\n//   }\n//   render() {\n//     return (\n//       <div>\n//         <Layout>\n//           {\n//             this.props.activePartnerCompanies.length > 0 &&\n//             <CompanyList activePartnerCompanies={this.props.activePartnerCompanies} activeCompany={this.props.activeCompany} changeActiveCompany={this.props.changeActiveCompany} />\n//           }\n//           <GoogleDoc url={this.props.activeCompany.name ? `https://docs.google.com/document/d/1tan4xBwhVVWcsIVdQpuOOhWDPn5MkO3arrspShOSCGk/edit#heading=${this.props.activeCompany.notes_gdoc_heading_id}` : \"https://docs.google.com/document/d/12jQecxqh1oIdb2EcNm3qTAanjPJIEG0Zdf0vuusdfh0/edit\"} />\n//           <div>\n//             {\n//               this.props.activeCompany.name &&\n//                 <div className=\"column column-med\">\n//                   {\n//                     this.props.activeCompany.ceo_faces ? this.props.activeCompany.ceo_faces.map(ceo => <img className=\"img-sml circular margin-right-sml margin-bottom-sml flex-column\" src={ceo.url} /> ) : ''\n//                   }\n//                   <p><a href={this.props.activeCompany.onepager_gdoc_url} target=\"_blank\">One Pager</a></p>\n//                 </div>\n//             }\n//           </div>\n//         </Layout>\n//       </div>\n//     )\n//   }\n// }\n//\n// export default Index\n"]},"metadata":{},"sourceType":"module"}